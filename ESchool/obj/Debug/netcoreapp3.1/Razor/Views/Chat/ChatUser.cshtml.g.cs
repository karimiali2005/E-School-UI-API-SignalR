#pragma checksum "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "98bb317e748a5cdbc81941c374b51ead65794086"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Chat_ChatUser), @"mvc.1.0.view", @"/Views/Chat/ChatUser.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "E:\E-School\EschoolHesabiNew\ESchool\Views\_ViewImports.cshtml"
using ESchool;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\E-School\EschoolHesabiNew\ESchool\Views\_ViewImports.cshtml"
using ESchool.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\E-School\EschoolHesabiNew\ESchool\Views\_ViewImports.cshtml"
using ESchool.Need;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\E-School\EschoolHesabiNew\ESchool\Views\_ViewImports.cshtml"
using DatabaseLayer.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\E-School\EschoolHesabiNew\ESchool\Views\_ViewImports.cshtml"
using DatabaseLayer.Access;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\E-School\EschoolHesabiNew\ESchool\Views\_ViewImports.cshtml"
using System;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"98bb317e748a5cdbc81941c374b51ead65794086", @"/Views/Chat/ChatUser.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"27fe79aadfc202295453e0150d93b2d924692028", @"/Views/_ViewImports.cshtml")]
    public class Views_Chat_ChatUser : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<RoomProperties>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 3 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
   
    var UserId = Convert.ToInt32(this.User.FindFirst("UserId").Value);
    var RoomId = Convert.ToInt32(ViewData["RoomId"]);
    var TeacherId = Convert.ToInt32(ViewData["TeacherId"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div class=\"chatusers\">\r\n\r\n   \r\n");
#nullable restore
#line 12 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
     foreach(var roomuser in Model.RoomUsers)
    {
        int Id = RoomId == 0 ? roomuser.Room.RoomId : roomuser.User.UserId;
        string Nickname = RoomId == 0 ? roomuser.Room.RoomTitle : roomuser.User.FirstName + " " + roomuser.User.LastName;

        var LastTexts = RoomId == 0
            ? Model.RoomChats.Where(x => (x.TeacherId == UserId && x.RoomId == roomuser.RoomId) ).OrderByDescending(x => x.RoomChatId).ThenByDescending(x => x.RoomChatDate)
            : Model.RoomChats.Where(x => (x.RecieverId == roomuser.UserId || x.SenderId == roomuser.UserId) ).OrderByDescending(x => x.RoomChatId).ThenByDescending(x => x.RoomChatDate);
        var LastText = "";
        if(LastTexts.Count() > 0)
        {
            LastText = LastTexts.First().TextChat;
        }

        string classNameRow = RoomId == 0 ? "row cursor" : "row cursor";
        string Pic = RoomId == 0 ? "/imagesuser/icons/picstucdent.png" : "/Account/PictureUser?id="+ Id+ "&s=75";
        string classNameSpan = RoomId == 0 ? "off displayNone" : "off";
        if(RoomId > 0)
        {
            classNameRow = UserId == Id ? classNameRow + " back" : classNameRow;
        }
        else
        {
            var roomid = Model.Rooms.Count() > 0 ? Model.Rooms.First().RoomId : -1;
            classNameRow = roomid == Id ? classNameRow + " back" : classNameRow;
        }

        string onclick = "chRightLeft()";
        

#line default
#line hidden
#nullable disable
#nullable restore
#line 40 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
         if (RoomId == 0)
        {
            onclick = "chChatRoom(this, " + Id + ")";
        }

#line default
#line hidden
#nullable disable
            WriteLiteral("        <div");
            BeginWriteAttribute("onclick", " onclick=\"", 1804, "\"", 1822, 1);
#nullable restore
#line 45 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
WriteAttributeValue("", 1814, onclick, 1814, 8, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("class", "  class=\"", 1823, "\"", 1845, 1);
#nullable restore
#line 45 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
WriteAttributeValue("", 1832, classNameRow, 1832, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n            <div class=\"userpic\">\r\n                <img");
            BeginWriteAttribute("title", " title=\"", 1904, "\"", 1931, 1);
#nullable restore
#line 47 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
WriteAttributeValue("", 1912, Html.Raw(Nickname), 1912, 19, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 1932, "\"", 1957, 1);
#nullable restore
#line 47 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
WriteAttributeValue("", 1938, Html.Raw(Nickname), 1938, 19, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("src", " src=\"", 1958, "\"", 1968, 1);
#nullable restore
#line 47 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
WriteAttributeValue("", 1964, Pic, 1964, 4, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" />\r\n                <span");
            BeginWriteAttribute("title", " title=\"", 1995, "\"", 2006, 1);
#nullable restore
#line 48 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
WriteAttributeValue("", 2003, Id, 2003, 3, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("class", " class=\"", 2007, "\"", 2029, 1);
#nullable restore
#line 48 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
WriteAttributeValue("", 2015, classNameSpan, 2015, 14, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></span>\r\n            </div>\r\n            <div class=\"userdata\">\r\n                <span>");
#nullable restore
#line 51 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
                 Write(Html.Raw(Nickname));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                <label>");
#nullable restore
#line 52 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
                  Write(Html.Raw(Codes.getSubr(LastText)));

#line default
#line hidden
#nullable disable
            WriteLiteral("</label>\r\n            </div>\r\n        </div>\r\n");
#nullable restore
#line 55 "E:\E-School\EschoolHesabiNew\ESchool\Views\Chat\ChatUser.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n</div>\r\n");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<RoomProperties> Html { get; private set; }
    }
}
#pragma warning restore 1591
