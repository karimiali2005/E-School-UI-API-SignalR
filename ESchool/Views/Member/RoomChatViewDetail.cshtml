@model Es.DataLayerCore.DTOs.RoomChat.RoomChatLeftViewModel
@{
    Layout = null;
    var addressDownloadLearn = "https://hesabidownload.ir/hesabischoolfiles/" + SettingContext.PathStoreFiles.Instance.LearnFile;
    var addressDownloadNormal = "https://hesabidownload.ir/hesabischoolfiles/" + SettingContext.PathStoreFiles.Instance.NormalFile;
    var currentDateShow = DateTime.Now.AddYears(-20);
}


@if (Model != null && Model.RoomChatLeftShowResult != null)
{
    string[] mime_types_images = { "image/jpeg", "image/png", "image/gif" };
    string[] mime_types_audios = { "audio/wav", "audio/mp3", "audio/ogg", "audio/mpeg", "audio/mp4", "audio/aac", "video/ogg" };
    string[] mime_types_videos = { "video/mp4", "video/webm", "video/quicktime" };
    var userId = UserContext.GetClaimValueInteger(ClaimName.UserId);
    var userTypeId = UserContext.GetClaimValueInteger(ClaimName.UserTypeId);

    var permissionStudentChatEdit = Model.RoomChatLeftPropertyResult.PermissionStudentChatEdit;
    var permissionStudentChatDelete = Model.RoomChatLeftPropertyResult.PermissionStudentChatDelete;
    var roomChatGroupType = Model.RoomChatLeftPropertyResult.RoomChatGroupType;
    @if (Model.RoomChatLeftShowResult.Count > 0)
    {
        <input type="hidden" value="@Model.RoomChatLeftShowResult.FirstOrDefault().RoomChatID" id="input_roomChatFirst" />
    }


    foreach (var roomChat in Model.RoomChatLeftShowResult)
    {

        if (currentDateShow.ToString("yyyy/MM/dd") != roomChat.RoomChatDate.ToString("yyyy/MM/dd"))
        {
            currentDateShow = roomChat.RoomChatDate;
            <div class=" date">
                <span>@Codes.getPersianDate(currentDateShow)</span>
            </div>
        }
        if (string.IsNullOrEmpty(roomChat.Filename))
        {
            if (userId != roomChat.SenderID)
            {
                if (roomChat.RoomChatParentID == null)
                {
                    <div id="msg@(roomChat.RoomChatID)" class=" your-massage px-4 py-2 ltr">
                        <div class=" content ">


                            <div class=" name-sender-massage">
                                <span>@roomChat.SenderName</span>
                            </div>
                            <!-- end name-sender-massage change-->
                            <!-- start dropdown change-->

                            <div class="dropdown div-option-massage">
                                <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false">
                                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                                </button>
                                <div class="dropdown-menu option-massage p-0"
                                     aria-labelledby="dropdownMenuButton">
                                    <div class=" dropdown-item p-0">
                                        <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                    </div>
                                    @if (roomChatGroupType == 1 && permissionStudentChatEdit)
                                    {
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                        </div>
                                    }
                                    @if (roomChatGroupType == 1 && permissionStudentChatDelete)
                                    {
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                        </div>
                                    }
                                    @if (roomChatGroupType == 1 && userTypeId == 4)
                                    {
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                        </div>
                                    }
                                    <div class=" dropdown-item p-0">
                                        <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                    </div>


                                </div>
                            </div>
                            <!-- end dropdown change-->


                            <div class="text-massage div-text-massage-chat">
                                @Html.Raw(roomChat.TextChat)
                            </div>
                            <div class=" details-massage">
                                <div class=" view">
                                    <span class=" mr-2">
                                        <img src="~/imagemember/61-512.png"
                                             alt="view">
                                    </span>
                                    <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                </div>
                                <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                @*<div class=" seen">
                                        <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                    </div>*@
                                @if (roomChat.TagLearn)
                                {
                                    <div class="category">محتوای آموزشی</div>
                                }
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <div id="msg@(roomChat.RoomChatID)" class=" your-massage your-massage-reply px-4 py-2 ltr">
                        <div class=" content ">
                            <!-- start dropdown change-->
                            <div class=" name-sender-massage">
                                <span>@roomChat.SenderName</span>
                            </div>

                            <div class="dropdown div-option-massage">
                                <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false">
                                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                                </button>
                                <div class="dropdown-menu option-massage p-0"
                                     aria-labelledby="dropdownMenuButton">
                                    <div class=" dropdown-item p-0">
                                        <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                    </div>
                                    @if (roomChatGroupType == 1 && permissionStudentChatEdit)
                                    {
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                        </div>
                                    }
                                    @if (roomChatGroupType == 1 && permissionStudentChatDelete)
                                    {
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                        </div>
                                    }
                                    @if (roomChatGroupType == 1 && userTypeId == 4)
                                    {
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                        </div>
                                    }
                                    <div class=" dropdown-item p-0">
                                        <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                    </div>



                                </div>
                            </div>



                            <!-- end dropdown change-->
                            <!-- start replied change-->

                            <div onclick="GoToMessage('msg@(roomChat.RoomChatParentID)')" class=" replied-box">
                                <div class=" replied-text">
                                    @Html.Raw(roomChat.ParentTextChat)
                                </div>
                                <div class=" reply-name">@roomChat.ParentSenderName</div>

                            </div>
                            <!-- end replied change-->

                            <div class="text-massage div-text-massage-chat">
                                @Html.Raw(roomChat.TextChat)
                            </div>
                            <div class=" details-massage">
                                <div class=" view">
                                    <span class=" mr-2">
                                        <img src="~/imagemember/61-512.png"
                                             alt="view">
                                    </span>
                                    <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                </div>
                                <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                @*<div class=" seen">
                                        <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                    </div>*@
                                @if (roomChat.TagLearn)
                                {
                                    <div class="category">محتوای آموزشی</div>
                                }
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                if (roomChat.RoomChatParentID == null)
                {
                    <div id="msg@(roomChat.RoomChatID)" class=" my-massage px-4 py-2">
                        <div class=" content ">
                            <!-- start dropdown change-->
                            <div class="dropdown div-option-massage">
                                <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false">
                                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                                </button>
                                <div class="dropdown-menu option-massage p-0"
                                     aria-labelledby="dropdownMenuButton">
                                    <div class=" dropdown-item p-0">
                                        <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                    </div>

                                    <div class=" dropdown-item p-0">
                                        <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                    </div>

                                    <div class=" dropdown-item p-0">
                                        <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                    </div>

                                    @if (roomChatGroupType == 1 && userTypeId == 4)
                                    {
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                        </div>
                                    }

                                    <div class=" dropdown-item p-0">
                                        <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                    </div>


                                </div>
                            </div>
                            <!-- end dropdown change-->
                            <div class="text-massage div-text-massage-chat">
                                @Html.Raw(roomChat.TextChat)
                            </div>
                            <div class=" details-massage">
                                <div class=" view">
                                    <span class=" mr-2">
                                        <img src="~/imagemember/61-512.png"
                                             alt="view">
                                    </span>
                                    <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                </div>
                                <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                @*<div class=" seen">
                                        <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                    </div>*@
                                @if (roomChat.TagLearn)
                                {
                                    <div class="category">محتوای آموزشی</div>
                                }
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <div id="msg@(roomChat.RoomChatID)" class=" my-massage my-massage-reply px-4 py-2">
                        <div class=" content ">
                            <!-- start dropdown change-->
                            <div class="dropdown div-option-massage">
                                <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false">
                                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                                </button>
                                <div class="dropdown-menu option-massage p-0"
                                     aria-labelledby="dropdownMenuButton">
                                    <div class=" dropdown-item p-0">
                                        <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                    </div>

                                    <div class=" dropdown-item p-0">
                                        <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                    </div>

                                    <div class=" dropdown-item p-0">
                                        <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                    </div>

                                    @if (roomChatGroupType == 1 && userTypeId == 4)
                                    {
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                        </div>
                                    }

                                    <div class=" dropdown-item p-0">
                                        <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                    </div>

                                </div>
                            </div>
                            <!-- end dropdown change-->
                            <!-- start replied change-->
                            <div onclick="GoToMessage('msg@(roomChat.RoomChatParentID)')" class=" replied-box">
                                <div class=" replied-text">
                                    @Html.Raw(roomChat.ParentTextChat)
                                </div>
                                <div class=" reply-name">@roomChat.ParentSenderName</div>

                            </div>
                            <!-- end replied change-->
                            <div class="text-massage div-text-massage-chat">
                                @Html.Raw(roomChat.TextChat)
                            </div>
                            <div class=" details-massage">
                                <div class=" view">
                                    <span class=" mr-2">
                                        <img src="~/imagemember/61-512.png"
                                             alt="view">
                                    </span>
                                    <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                </div>
                                <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                @*<div class=" seen">
                                        <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                    </div>*@
                                @if (roomChat.TagLearn)
                                {
                                    <div class="category">محتوای آموزشی</div>
                                }
                            </div>
                        </div>
                    </div>
                }
            }
        }
        else
        {
            if (userId != roomChat.SenderID)
            {
                if (roomChat.RoomChatParentID == null)
                {

                    if (mime_types_images.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" channel-massage px-4 py-2 ltr">
                            <!-- در دیو زیر در بخش استایل باید طول (ویدث) عکس داده شود-->
                            <div class=" content ">
                                <!-- start name-sender-massage change-->

                                <div class=" name-sender-massage">
                                    <span>@roomChat.SenderName</span>
                                </div>
                                <!-- end name-sender-massage change-->
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>
                                        @if (roomChatGroupType == 1 && permissionStudentChatEdit)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && permissionStudentChatDelete)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>



                                    </div>
                                </div>
                                <!-- end dropdown change-->

                                <div class=" img-content">
                                    <div class="div-img">
                                        <a href="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" target="_blank">
                                            <img class="img-fluid" src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" />
                                        </a>
                                    </div>
                                </div>
                                <div class=" text-content">
                                    <div class=" text div-text-massage-chat">
                                        @Html.Raw(roomChat.TextChat)
                                    </div>
                                    <div class=" details-massage">
                                        <div class=" view">
                                            <span class=" mr-2">
                                                <img src="~/imagemember/61-512.png"
                                                     alt="view">
                                            </span>
                                            <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                        </div>
                                        <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                        @*<div class=" seen">
                                                <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                            </div>*@
                                        @if (roomChat.TagLearn)
                                        {
                                            <div class="category">محتوای آموزشی</div>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    else if (mime_types_videos.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" channel-massage px-4 py-2 ltr">
                            <!-- در دیو زیر در بخش استایل باید طول (ویدث) عکس داده شود-->
                            <div class=" content " style="width: 640px;">
                                <!-- start name-sender-massage change-->

                                <div class=" name-sender-massage">
                                    <span>@roomChat.SenderName</span>
                                </div>
                                <!-- end name-sender-massage change-->
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>
                                        @if (roomChatGroupType == 1 && permissionStudentChatEdit)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && permissionStudentChatDelete)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>



                                    </div>
                                </div>
                                <!-- end dropdown change-->


                                <div class=" img-content">
                                    <div class=" div-movie">
                                        <!-- start change6 -->
                                        <video onplay="RoomChatPlayVoiceUpdate('@roomChat.RoomChatID')" controls><source src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" type="@(roomChat.MimeType=="video/quicktime" ? "video/mp4" : roomChat.MimeType)"></video>

                                        @*<video src="../VID_20180202_104405.mp4" controls></video>*@
                                        <!-- end change6 -->
                                        <!-- <img src="../img/unnamed.png" alt="user-img-sent" class=" img-fluid"> -->
                                        @*<a href="#"><i class="fa fa-play-circle" aria-hidden="true"></i></a>*@
                                    </div>
                                </div>
                                <div class=" text-content">
                                    <div class=" text div-text-massage-chat">
                                        @Html.Raw(roomChat.TextChat)
                                    </div>
                                    <div class=" details-massage">
                                        <div class=" view">
                                            <span class=" mr-2">
                                                <img src="~/imagemember/61-512.png"
                                                     alt="view">
                                            </span>
                                            <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                        </div>
                                        <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                        @*<div class=" seen">
                                                <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                            </div>*@
                                        @if (roomChat.TagLearn)
                                        {
                                            <div class="category">محتوای آموزشی</div>
                                        }

                                        @if (roomChat.RoomChatPlayVoice == false)
                                        {
                                            <div id="playVoiceBullet@(roomChat.RoomChatID)" class=" view">
                                                <span class=" mr-2">
                                                    <img src="~/imagemember/circle.png"
                                                         alt="view">
                                                </span>

                                            </div>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    else if (mime_types_audios.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" your-massage-voice px-4 py-2 ltr">
                            <div class=" content ">
                                <!-- start name-sender-massage change-->

                                <div class=" name-sender-massage">
                                    <span>@roomChat.SenderName</span>
                                </div>
                                <!-- end name-sender-massage -->
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>
                                        @if (roomChatGroupType == 1 && permissionStudentChatEdit)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && permissionStudentChatDelete)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>



                                    </div>
                                </div>
                                <!-- end dropdown -->
                                @*<div class=" right">
                                        <div class=" img-pro mx-2 d-flex align-items-center">
                                            <img src="~/imagemember/ali_200.jpg" alt="" class=" img-fluid">
                                        </div>

                                    </div>*@
                                <div class=" left">
                                    <div class="div-voice-massage">
                                        <!-- start change6 -->
                                        <div class="voice-massage">
                                            <audio onplay="RoomChatPlayVoiceUpdate('@roomChat.RoomChatID')" controls><source src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" type="@roomChat.MimeType"></audio>
                                            @*<audio src="../Behnam Bani - Ghorse Ghamar 2 (320).mp3"
                                                controls></audio>*@
                                        </div>
                                        <!-- end change6 -->

                                    </div>
                                    <div class=" text-content">
                                        <div class=" text div-text-massage-chat">
                                            @Html.Raw(roomChat.TextChat)
                                        </div>
                                        <div class=" details-massage">
                                            <div class=" view">
                                                <span class=" mr-2">
                                                    <img src="~/imagemember/61-512.png"
                                                         alt="view">
                                                </span>
                                                <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                            </div>
                                            <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                            @*<div class=" seen">
                                                    <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                                </div>*@
                                            @if (roomChat.TagLearn)
                                            {
                                                <div class="category">محتوای آموزشی</div>
                                            }


                                            @if (roomChat.RoomChatPlayVoice == false)
                                            {
                                                <div id="playVoiceBullet@(roomChat.RoomChatID)" class=" view">
                                                    <span class=" mr-2">
                                                        <img src="~/imagemember/circle.png"
                                                             alt="view">
                                                    </span>

                                                </div>
                                            }

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    }
                    else
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" your-massage px-4 py-2 ltr">
                            <div class=" content ">
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>
                                        @if (roomChatGroupType == 1 && permissionStudentChatEdit)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && permissionStudentChatDelete)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>

                                    </div>
                                </div>
                                <!-- end dropdown change-->
                                <!-- start replied change-->

                                <div class=" name-sender-massage">
                                    <span>@roomChat.SenderName</span>
                                </div>

                                <!-- end replied change-->
                                <div class=" file-content mb-2">
                                    <a href="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" class="div-file ">
                                        <div class=" download-icon">
                                            <div><img src="/imagemember/download.svg" alt=""></div>
                                        </div>
                                        <div class=" d-flex align-items-center h-100">
                                            <div class="progdon-namefile">
                                                <div class="nameFile-icon"><span>@roomChat.Filename</span></div>
                                                @*<div class="download-progress">57%</div>*@
                                            </div>
                                            <div class=" file-icon">
                                                <div><img src="/imagemember/document.svg" alt=""></div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    if (mime_types_images.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" your-massage your-massage-reply px-4 py-2 ltr">
                            <div class=" content ">
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>
                                        @if (roomChatGroupType == 1 && permissionStudentChatEdit)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && permissionStudentChatDelete)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>

                                    </div>
                                </div>
                                <!-- end dropdown change-->
                                <!-- start replied change-->

                                <div class=" name-sender-massage">
                                    <span>@roomChat.SenderName</span>
                                </div>
                                <div onclick="GoToMessage('msg@(roomChat.RoomChatParentID)')" class=" replied-box mb-2 ">
                                    <div class=" replied-text">
                                        @Html.Raw(roomChat.ParentTextChat)
                                    </div>
                                    <div class=" reply-name">@roomChat.ParentSenderName</div>

                                </div>

                                <!-- end replied change-->
                                <div class=" img-content">
                                    <div class="div-img">
                                        <a href="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" target="_blank">
                                            <img class="img-fluid" src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" />
                                        </a>
                                    </div>
                                </div>
                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }
                                </div>
                            </div>
                        </div>

                    }
                    else if (mime_types_videos.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" your-massage your-massage-reply px-4 py-2 ltr">
                            <div class=" content ">
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>
                                        @if (roomChatGroupType == 1 && permissionStudentChatEdit)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && permissionStudentChatDelete)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>

                                    </div>
                                </div>
                                <!-- end dropdown change-->
                                <!-- start replied change-->

                                <div class=" name-sender-massage">
                                    <span>@roomChat.SenderName</span>
                                </div>
                                <div onclick="GoToMessage('msg@(roomChat.RoomChatParentID)')" class=" replied-box mb-2 ">
                                    <div class=" replied-text">
                                        @Html.Raw(roomChat.ParentTextChat)
                                    </div>
                                    <div class=" reply-name">@roomChat.ParentSenderName</div>

                                </div>
                                <!-- end replied change-->
                                <div class=" img-content">
                                    <div class=" div-movie">
                                        <!-- start change6 -->
                                        <video onplay="RoomChatPlayVoiceUpdate('@roomChat.RoomChatID')" controls><source src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" type="@(roomChat.MimeType=="video/quicktime" ? "video/mp4" : roomChat.MimeType)"></video>
                                        <!-- end change6 -->
                                    </div>
                                </div>
                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }
                                    @if (roomChat.RoomChatPlayVoice == false)
                                    {
                                        <div id="playVoiceBullet@(roomChat.RoomChatID)" class=" view">
                                            <span class=" mr-2">
                                                <img src="~/imagemember/circle.png"
                                                     alt="view">
                                            </span>

                                        </div>
                                    }
                                </div>
                            </div>
                        </div>

                    }
                    else if (mime_types_audios.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class="your-massage your-massage-reply your-massage-voice px-4 py-2 ltr">
                            <div class=" content ">
                                <!-- start name-sender-massage change-->

                                <div class=" name-sender-massage">
                                    <span>@roomChat.SenderName</span>
                                </div>
                                <!-- end name-sender-massage -->
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>
                                        @if (roomChatGroupType == 1 && permissionStudentChatEdit)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && permissionStudentChatDelete)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>


                                    </div>
                                </div>
                                <!-- end dropdown -->
                                <div onclick="GoToMessage('msg@(roomChat.RoomChatParentID)')" class=" replied-box mt-3">
                                    <div class=" replied-text">
                                        @Html.Raw(roomChat.ParentTextChat)
                                    </div>
                                    <div class=" reply-name">@roomChat.ParentSenderName</div>

                                </div>

                                <div class=" left">
                                    <div class="div-voice-massage">
                                        <!-- start change6 -->
                                        <div class="voice-massage">
                                            <audio onplay="RoomChatPlayVoiceUpdate('@roomChat.RoomChatID')" controls><source src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" type="@roomChat.MimeType"></audio>
                                        </div>
                                        <!-- end change6 -->

                                    </div>
                                    <div class=" text-content">
                                        <div class=" text div-text-massage-chat">
                                            @Html.Raw(roomChat.TextChat)
                                        </div>
                                        <div class=" details-massage">
                                            <div class=" view">
                                                <span class=" mr-2">
                                                    <img src="~/imagemember/61-512.png"
                                                         alt="view">
                                                </span>
                                                <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                            </div>
                                            <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                            @*<div class=" seen">
                                                    <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                                </div>*@
                                            @if (roomChat.TagLearn)
                                            {
                                                <div class="category">محتوای آموزشی</div>
                                            }

                                            @if (roomChat.RoomChatPlayVoice == false)
                                            {
                                                <div id="playVoiceBullet@(roomChat.RoomChatID)" class=" view">
                                                    <span class=" mr-2">
                                                        <img src="~/imagemember/circle.png"
                                                             alt="view">
                                                    </span>

                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" your-massage your-massage-reply px-4 py-2 ltr">
                            <div class=" content ">
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>
                                        @if (roomChatGroupType == 1 && permissionStudentChatEdit)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && permissionStudentChatDelete)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                            </div>
                                        }
                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>

                                    </div>
                                </div>
                                <!-- end dropdown change-->
                                <!-- start replied change-->

                                <div class=" name-sender-massage">
                                    <span>@roomChat.SenderName</span>
                                </div>
                                <div onclick="GoToMessage('msg@(roomChat.RoomChatParentID)')" class=" replied-box mb-1 ">
                                    <div class=" replied-text">
                                        @Html.Raw(roomChat.ParentTextChat)
                                    </div>
                                    <div class=" reply-name">@roomChat.ParentSenderName</div>

                                </div>
                                <!-- end replied change-->
                                <div class=" file-content">
                                    <a href="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" class="div-file ">
                                        <div class=" download-icon">
                                            <div><img src="/imagemember/download.svg" alt=""></div>
                                        </div>
                                        <div class=" d-flex align-items-center h-100">
                                            <div class="progdon-namefile">
                                                <div class="nameFile-icon"><span>@roomChat.Filename</span></div>
                                                @*<div class="download-progress">57%</div>*@
                                            </div>
                                            <div class=" file-icon">
                                                <div><img src="/imagemember/document.svg" alt=""></div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                <div class="text-massage mt-2 div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                }

            }
            else
            {
                if (roomChat.RoomChatParentID == null)
                {
                    if (mime_types_images.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" my-massage px-4 py-2">
                            <div class=" content ">
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                        </div>

                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>
                                    </div>
                                </div>
                                <!-- end dropdown -->
                                @*<div class=" name-sender-massage">
                                        <span>علی کریمی</span>
                                    </div>*@
                                <div class=" img-content">
                                    <div class="div-img">
                                        <a href="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" target="_blank">
                                            <img class="img-fluid" src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" />
                                        </a>
                                    </div>
                                </div>

                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }
                                </div>
                            </div>
                        </div>

                    }
                    else if (mime_types_videos.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" my-massage px-4 py-2">
                            <div class=" content ">
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                        </div>

                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>

                                    </div>
                                </div>

                                <div class=" img-content">
                                    <div class=" div-movie">
                                        <!-- start change6 -->
                                        <video onplay="RoomChatPlayVoiceUpdate('@roomChat.RoomChatID')" controls><source src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" type="@(roomChat.MimeType=="video/quicktime" ? "video/mp4" : roomChat.MimeType)"></video>
                                        <!-- end change6 -->
                                    </div>
                                </div>

                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }

                                    @if (roomChat.RoomChatPlayVoice == false)
                                    {
                                        <div id="playVoiceBullet@(roomChat.RoomChatID)" class=" view">
                                            <span class=" mr-2">
                                                <img src="~/imagemember/circle.png"
                                                     alt="view">
                                            </span>

                                        </div>
                                    }
                                </div>
                            </div>
                        </div>

                    }
                    else if (mime_types_audios.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" my-massage px-4 py-2">
                            <div class=" content ">
                                <!-- start dropdown change-->
                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                        </div>

                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>

                                    </div>
                                </div>
                                <!-- end dropdown change-->
                                <div class=" left ">
                                    <div class="div-voice-massage">
                                        <!-- start change6 -->
                                        <div class="voice-massage">
                                            <audio onplay="RoomChatPlayVoiceUpdate('@roomChat.RoomChatID')" controls><source src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" type="@roomChat.MimeType"></audio>
                                        </div>
                                        <!-- end change6 -->
                                    </div>
                                </div>
                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }


                                    @if (roomChat.RoomChatPlayVoice == false)
                                    {
                                        <div id="playVoiceBullet@(roomChat.RoomChatID)" class=" view">
                                            <span class=" mr-2">
                                                <img src="~/imagemember/circle.png"
                                                     alt="view">
                                            </span>

                                        </div>
                                    }
                                </div>
                            </div>
                        </div>

                    }
                    else
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" my-massage px-4 py-2">
                            <div class=" content ">
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                        </div>

                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>


                                    </div>
                                </div>
                                <!-- end dropdown -->

                                <div class=" file-content mb-2">
                                    <a href="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" class="div-file ">
                                        <div class=" download-icon">
                                            <div><img src="/imagemember/download.svg" alt=""></div>
                                        </div>
                                        <div class=" d-flex align-items-center h-100">
                                            <div class="progdon-namefile">
                                                <div class="nameFile-icon"><span>@roomChat.Filename</span></div>
                                                @*<div class="download-progress">57%</div>*@
                                            </div>
                                            <div class=" file-icon">
                                                <div><img src="imagemember/document.svg" alt=""></div>
                                            </div>
                                        </div>
                                    </a>
                                </div>

                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    if (mime_types_images.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" my-massage my-massage-reply px-4 py-2">
                            <div class=" content ">
                                <!-- start dropdown change-->
                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                        </div>

                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>


                                    </div>
                                </div>
                                <!-- end dropdown change-->
                                <!-- start replied change-->
                                @*<div class=" name-sender-massage">
                                        <span>علی کریمی</span>
                                    </div>*@
                                <div onclick="GoToMessage('msg@(roomChat.RoomChatParentID)')" class=" replied-box mb-1">
                                    <div class=" replied-text">
                                        @Html.Raw(roomChat.ParentTextChat)
                                    </div>
                                    <div class=" reply-name">@roomChat.ParentSenderName</div>

                                </div>
                                <div class=" img-content">
                                    <div class="div-img">
                                        <a href="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" target="_blank">
                                            <img class="img-fluid" src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" />
                                        </a>
                                    </div>
                                </div>
                                <!-- end replied change-->
                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                    else if (mime_types_videos.Contains(roomChat.MimeType))
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" my-massage my-massage-reply px-4 py-2">
                            <div class=" content ">
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                        </div>

                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>


                                    </div>
                                </div>
                                <!-- end dropdown -->
                                @*<div class=" name-sender-massage">
                                        <span>علی کریمی</span>
                                    </div>*@
                                <div onclick="GoToMessage('msg@(roomChat.RoomChatParentID)')" class=" replied-box  mb-2">
                                    <div class=" replied-text">
                                        @Html.Raw(roomChat.ParentTextChat)
                                    </div>
                                    <div class=" reply-name">@roomChat.ParentSenderName</div>

                                </div>
                                <div class=" img-content">
                                    <div class=" div-movie">
                                        <!-- start change6 -->
                                        <video onplay="RoomChatPlayVoiceUpdate('@roomChat.RoomChatID')" controls><source src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" type="@(roomChat.MimeType=="video/quicktime" ? "video/mp4" : roomChat.MimeType)"></video>
                                        <!-- end change6 -->
                                    </div>
                                </div>

                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }



                                    @if (roomChat.RoomChatPlayVoice == false)
                                    {
                                        <div id="playVoiceBullet@(roomChat.RoomChatID)" class=" view">
                                            <span class=" mr-2">
                                                <img src="~/imagemember/circle.png"
                                                     alt="view">
                                            </span>

                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                    else if (mime_types_audios.Contains(roomChat.MimeType))
                    {

                        <div id="msg@(roomChat.RoomChatID)" class=" my-massage my-massage-reply px-4 py-2">
                            <div class=" content ">
                                <!-- start dropdown change-->
                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                        </div>

                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>


                                    </div>
                                </div>
                                <!-- end dropdown change-->
                                @*<div class=" name-sender-massage">
                                        <span>علی کریمی</span>
                                    </div>*@
                                <div class=" replied-box mb-2">
                                    <div class=" replied-text">
                                        @Html.Raw(roomChat.ParentTextChat)
                                    </div>
                                    <div class=" reply-name">@roomChat.ParentSenderName</div>

                                </div>
                                <div class=" left">
                                    <div class="div-voice-massage">
                                        <!-- start change6 -->
                                        <div class="voice-massage">
                                            <audio onplay="RoomChatPlayVoiceUpdate('@roomChat.RoomChatID')" controls><source src="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" type="@roomChat.MimeType"></audio>
                                        </div>
                                        <!-- end change6 -->
                                    </div>

                                </div>

                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }


                                    @if (roomChat.RoomChatPlayVoice == false)
                                    {
                                        <div id="playVoiceBullet@(roomChat.RoomChatID)" class=" view">
                                            <span class=" mr-2">
                                                <img src="~/imagemember/circle.png"
                                                     alt="view">
                                            </span>

                                        </div>
                                    }
                                </div>

                            </div>
                        </div>

                    }
                    else
                    {
                        <div id="msg@(roomChat.RoomChatID)" class=" my-massage my-massage-reply px-4 py-2">
                            <div class=" content ">
                                <!-- start dropdown change-->

                                <div class="dropdown div-option-massage">
                                    <button class="btn shadow-none dropdown-toggle pb-2 pl-2 p-0 " type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </button>
                                    <div class="dropdown-menu option-massage p-0"
                                         aria-labelledby="dropdownMenuButton">
                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatReply('@roomChat.RoomChatID',false,'@roomChat.SenderName')" type="button">پاسخ</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button onclick="RoomChatEdit('@roomChat.RoomChatID','@roomChat.SenderName')" type="button">ویرایش</button>
                                        </div>

                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDelete('@roomChat.RoomChatID')">حذف</button>
                                        </div>

                                        @if (roomChatGroupType == 1 && userTypeId == 4)
                                        {
                                            <div class=" dropdown-item p-0">
                                                <button type="button" onclick="RoomChatPin('@roomChat.RoomChatID')">سنجاق</button>
                                            </div>
                                        }
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatForward('@roomChat.RoomChatID')">ارسال</button>
                                        </div>
                                        <div class=" dropdown-item p-0">
                                            <button type="button" onclick="RoomChatDownload('@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename')">دانلود</button>
                                        </div>


                                    </div>
                                </div>
                                <!-- end dropdown -->
                                <div onclick="GoToMessage('msg@(roomChat.RoomChatParentID)')" class=" replied-box mb-1">
                                    <div class=" replied-text">
                                        @Html.Raw(roomChat.ParentTextChat)
                                    </div>
                                    <div class=" reply-name">@roomChat.ParentSenderName</div>

                                </div>
                                <div class=" file-content">
                                    <a href="@(roomChat.TagLearn ? addressDownloadLearn : addressDownloadNormal)@roomChat.RoomChatFolder/@roomChat.Filename" class="div-file ">
                                        <div class=" download-icon">
                                            <div><img src="/imagemember/download.svg" alt=""></div>
                                        </div>
                                        <div class=" d-flex align-items-center h-100">
                                            <div class="progdon-namefile">
                                                <div class="nameFile-icon"><span>@roomChat.Filename</span></div>
                                                @*<div class="download-progress">57%</div>*@
                                            </div>
                                            <div class=" file-icon">
                                                <div><img src="/imagemember/document.svg" alt=""></div>
                                            </div>
                                        </div>
                                    </a>
                                </div>

                                <div class="text-massage div-text-massage-chat">
                                    @Html.Raw(roomChat.TextChat)
                                </div>
                                <div class=" details-massage">
                                    <div class=" view">
                                        <span class=" mr-2">
                                            <img src="~/imagemember/61-512.png"
                                                 alt="view">
                                        </span>
                                        <span class=" mr-1">@roomChat.RoomChatViewNumber</span>@*<span>k</span>*@
                                    </div>
                                    <div class=" time">@roomChat.RoomChatDate.ToString("HH:mm")</div>
                                    @*<div class=" seen">
                                            <span><img src="~/imagemember/dou-tick.svg" alt="seen"></span>
                                        </div>*@
                                    @if (roomChat.TagLearn)
                                    {
                                        <div class="category">محتوای آموزشی</div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                }

            }

        }

    }


}

